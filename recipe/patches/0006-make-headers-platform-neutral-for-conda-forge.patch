From bae712d3cba92a670c93deaeedf659973c69145c Mon Sep 17 00:00:00 2001
From: Isuru Fernando <isuruf@gmail.com>
Date: Wed, 29 Oct 2025 10:42:00 -0700
Subject: [PATCH 6/6] make headers platform neutral for conda-forge

---
 libcxx/include/__config_site.in | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

diff --git a/libcxx/include/__config_site.in b/libcxx/include/__config_site.in
index fc01aaf2d874..8776ddca71c9 100644
--- a/libcxx/include/__config_site.in
+++ b/libcxx/include/__config_site.in
@@ -22,7 +22,11 @@
 #cmakedefine01 _LIBCPP_HAS_THREAD_API_WIN32
 #define _LIBCPP_HAS_THREAD_API_C11 0 // FIXME: Is this guarding dead code?
 #cmakedefine _LIBCPP_DISABLE_VISIBILITY_ANNOTATIONS
-#cmakedefine01 _LIBCPP_HAS_VENDOR_AVAILABILITY_ANNOTATIONS
+#ifdef __APPLE__
+#define _LIBCPP_HAS_VENDOR_AVAILABILITY_ANNOTATIONS 1
+#else
+#define _LIBCPP_HAS_VENDOR_AVAILABILITY_ANNOTATIONS 0
+#endif
 #cmakedefine _LIBCPP_NO_VCRUNTIME
 #cmakedefine _LIBCPP_TYPEINFO_COMPARISON_IMPLEMENTATION @_LIBCPP_TYPEINFO_COMPARISON_IMPLEMENTATION@
 #cmakedefine01 _LIBCPP_HAS_FILESYSTEM
