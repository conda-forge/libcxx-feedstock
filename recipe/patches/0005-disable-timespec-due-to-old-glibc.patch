From 5f5e3475ea59942b3fc5c115905d212c2c8c86a6 Mon Sep 17 00:00:00 2001
From: "H. Vetinari" <h.vetinari@gmx.com>
Date: Fri, 12 Aug 2022 16:09:52 +0200
Subject: [PATCH 5/5] disable timespec due to old glibc

see https://github.com/llvm/llvm-project/commit/21f73d5826fb5024a27eaacafadfa316f58949c5
---
 libcxx/include/ctime | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/libcxx/include/ctime b/libcxx/include/ctime
index 0c6e4dfd6f..c961275914 100644
--- a/libcxx/include/ctime
+++ b/libcxx/include/ctime
@@ -59,7 +59,7 @@ using ::clock_t _LIBCPP_USING_IF_EXISTS;
 using ::size_t _LIBCPP_USING_IF_EXISTS;
 using ::time_t _LIBCPP_USING_IF_EXISTS;
 using ::tm _LIBCPP_USING_IF_EXISTS;
-#if _LIBCPP_STD_VER > 14
+#if _LIBCPP_STD_VER > 14 && defined(_LIBCPP_HAS_TIMESPEC_GET)
 using ::timespec _LIBCPP_USING_IF_EXISTS;
 #endif
 using ::clock _LIBCPP_USING_IF_EXISTS;
@@ -71,7 +71,7 @@ using ::ctime _LIBCPP_USING_IF_EXISTS;
 using ::gmtime _LIBCPP_USING_IF_EXISTS;
 using ::localtime _LIBCPP_USING_IF_EXISTS;
 using ::strftime _LIBCPP_USING_IF_EXISTS;
-#if _LIBCPP_STD_VER > 14
+#if _LIBCPP_STD_VER > 14 && defined(_LIBCPP_HAS_TIMESPEC_GET)
 using ::timespec_get _LIBCPP_USING_IF_EXISTS;
 #endif
 
-- 
2.38.1.windows.1

